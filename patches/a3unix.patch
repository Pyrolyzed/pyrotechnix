From 9e8b274443bebccd3b3e4a261bca9ddc2d508c72 Mon Sep 17 00:00:00 2001
From: DrymarchonShaun <40149778+DrymarchonShaun@users.noreply.github.com>
Date: Sun, 22 Dec 2024 20:33:47 -0800
Subject: [PATCH] feat: add Expeditionary Forces CDLC

---
 src/arma3-unix-launcher-library/arma3client.hpp | 2 +-
 src/arma3-unix-launcher/mainwindow.cpp          | 2 ++
 src/arma3-unix-launcher/mainwindow.ui           | 7 +++++++
 src/arma3-unix-launcher/settings.cpp            | 1 +
 4 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/src/arma3-unix-launcher-library/arma3client.hpp b/src/arma3-unix-launcher-library/arma3client.hpp
index 83cb911..82c37bd 100644
--- a/src/arma3-unix-launcher-library/arma3client.hpp
+++ b/src/arma3-unix-launcher-library/arma3client.hpp
@@ -13,7 +13,7 @@ namespace ARMA3::Definitions
 
     static constexpr char const *app_id = "107410";
 
-    static const std::array<char const *, 30> exclusions{"Addons", "AoW", "Argo", "BattlEye", "Contact", "Curator", "Dll", "Dta", "Enoch", "Expansion", "fontconfig", "GM", "CSLA", "Heli", "Jets", "Kart", "Keys", "Launcher", "MPMissions", "Mark", "Missions", "Orange", "SPE", "Tacops", "Tank", "vn", "RF", "WS", "legal", "steam_shader_cache"};
+    static const std::array<char const *, 31> exclusions{"Addons", "AoW", "Argo", "BattlEye", "Contact", "Curator", "Dll", "Dta", "Enoch", "Expansion", "fontconfig", "GM", "CSLA", "Heli", "Jets", "Kart", "Keys", "Launcher", "MPMissions", "Mark", "Missions", "Orange", "SPE", "Tacops", "Tank", "vn", "RF", "EF", "WS", "legal", "steam_shader_cache"};
     //TODO: Use dta/product.bin for exclusion list
 
     #ifdef __linux
diff --git a/src/arma3-unix-launcher/mainwindow.cpp b/src/arma3-unix-launcher/mainwindow.cpp
index b22dd85..dc03fa2 100644
--- a/src/arma3-unix-launcher/mainwindow.cpp
+++ b/src/arma3-unix-launcher/mainwindow.cpp
@@ -222,6 +222,8 @@ try
         mods.push_back(client->GetPath() / "vn");
     if (parameters["dlcReactionForces"])
         mods.push_back(client->GetPath() / "RF");
+    if (parameters["dlcExpeditionaryForces"])
+        mods.push_back(client->GetPath() / "EF");
     if (parameters["dlcCSLA"])
         mods.push_back(client->GetPath() / "CSLA");
     if (parameters["dlcSpearhead1944"])
diff --git a/src/arma3-unix-launcher/mainwindow.ui b/src/arma3-unix-launcher/mainwindow.ui
index edd2ae6..96b204c 100644
--- a/src/arma3-unix-launcher/mainwindow.ui
+++ b/src/arma3-unix-launcher/mainwindow.ui
@@ -256,6 +256,13 @@
                   </property>
                  </widget>
                 </item>
+                <item>
+                 <widget class="QCheckBox" name="checkbox_dlc_expeditionary_forces">
+                  <property name="text">
+                   <string>Enable Expeditionary Forces DLC</string>
+                  </property>
+                 </widget>
+                </item>
                 <item>
                  <widget class="QCheckBox" name="checkbox_dlc_csla">
                   <property name="text">
diff --git a/src/arma3-unix-launcher/settings.cpp b/src/arma3-unix-launcher/settings.cpp
index 28e0ffa..0105815 100644
--- a/src/arma3-unix-launcher/settings.cpp
+++ b/src/arma3-unix-launcher/settings.cpp
@@ -142,6 +142,7 @@ void Settings::load_settings_to_ui(Ui::MainWindow *ui)
     read_setting("dlcGlobalMobilization", ui->checkbox_dlc_global_mobilization);
     read_setting("dlcSogPrairieFire", ui->checkbox_dlc_sog_prairie_fire);
     read_setting("dlcReactionForces", ui->checkbox_dlc_reaction_forces);
+    read_setting("dlcExpeditionaryForces", ui->checkbox_dlc_expeditionary_forces);
     read_setting("dlcCSLA", ui->checkbox_dlc_csla);
     read_setting("dlcSpearhead1944", ui->checkbox_dlc_spearhead_1944);
     read_setting("dlcWesternSahara", ui->checkbox_dlc_western_sahara);
